import{b as e,T as a,a as l}from"./baTable.75ed4bd8.js";/* empty css             *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                   */import{d as o,t,r as s,Y as r,o as m,ah as d,ai as i,ac as n,ad as u,a5 as p,b as f,k as b,w as c,y as _,G as g,n as h,f as v,z as x,N as y,j as w,ae as j,e as k,M as A,L as T,g as V,F as C,a6 as F,af as W,a7 as I,ag as L,a8 as S,p as U,a0 as q}from"./index.99533025.js";import{t as z,u as G,b as H}from"./common.0150f410.js";const K={class:"title"},M=U(o({__name:"messagePopup",setup(e){t();const a=F("baTable"),l=s(),o=r({text_message:[{required:!0}]}),U=s([]);return m((()=>{new z(G,!0).index().then((e=>{U.value=e.data.list,a.form.items.user=U.value[0].id})).catch((()=>{}))})),(e,t)=>{const s=d,r=i,m=W,F=I,q=L,z=n,G=S,H=u,M=p;return f(),b(H,{"close-on-click-modal":!1,"model-value":!!h(a).form.operate,onClose:h(a).toggleForm},{header:c((()=>[_("div",K,g(h(a).form.operate||"."),1)])),footer:c((()=>[_("div",{style:y("width: calc(100% - "+h(a).form.labelWidth/1.8+"px)")},[v(G,{onClick:t[3]||(t[3]=e=>h(a).toggleForm(""))},{default:c((()=>[x("取消")])),_:1}),v(G,{loading:h(a).form.submitLoading,type:"primary",onClick:t[4]||(t[4]=e=>h(a).onSubmit(l.value))},{default:c((()=>[x(" 保存 ")])),_:1},8,["loading"])],4)])),default:c((()=>[w((f(),b(z,{class:"ba-table-form-scrollbar"},{default:c((()=>[_("div",{class:C(["ba-operate-form","ba-"+h(a).form.operate+"-form"]),style:y("width: calc(100% - "+h(a).form.labelWidth/2+"px)")},[h(a).form.loading?V("",!0):(f(),b(q,{key:0,ref_key:"formRef",ref:l,model:h(a).form.items,"label-position":"right","label-width":h(a).form.labelWidth+"px",rules:o,onKeyup:t[2]||(t[2]=j((e=>h(a).onSubmit(l.value)),["enter"]))},{default:c((()=>[v(m,{prop:"user",label:"用户名"},{default:c((()=>[v(r,{modelValue:h(a).form.items.user,"onUpdate:modelValue":t[0]||(t[0]=e=>h(a).form.items.user=e),placeholder:"请选择用户"},{default:c((()=>[(f(!0),k(T,null,A(U.value,((e,a)=>(f(),b(s,{key:a,label:e.username,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(m,{prop:"text_message",label:"消息文本"},{default:c((()=>[v(F,{modelValue:h(a).form.items.text_message,"onUpdate:modelValue":t[1]||(t[1]=e=>h(a).form.items.text_message=e),type:"textarea",rows:10,placeholder:"请输入消息文本"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","label-width","rules"]))],6)])),_:1})),[[M,h(a).form.loading]])])),_:1},8,["model-value","onClose"])}}}),[["__scopeId","data-v-a6307031"]]),N=o({__name:"list",setup(o){const t=r(["refresh","add"]),s=new e(new z(H),{filter:{},column:[{label:"id",prop:"id"},{label:"用户",prop:"name"},{label:"文本",prop:"text_message"},{label:"operator",width:"180px"}]});return s.mount(),s.getIndex(),q("baTable",s),(e,o)=>(f(),k("div",null,[v(a,{buttons:t,onAction:h(s).onTableHeaderAction},null,8,["buttons","onAction"]),v(l,{onAction:h(s).onTableAction},null,8,["onAction"]),v(M)]))}});export{N as default};
