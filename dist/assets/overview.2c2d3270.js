import{d as e,Z as a,r as l,E as i,$ as n,o as t,q as s,b as d,e as u,y as r,f as v,w as o,z as m,L as p,M as c,k as f,G as g,F as y,A as h,R as b,h as _,B as x,C as k,p as C}from"./index.99533025.js";import{d as w,h as z,b as V}from"./commoin.cee43a45.js";import{t as I,h as N,o as j}from"./common.0150f410.js";const D=e=>(x("data-v-cbd588b3"),e=e(),k(),e),U={style:{color:"#000"}},W={style:{color:"green","margin-top":"var(--el-main-padding)"}},q={style:{color:"green","margin-top":"var(--el-main-padding)"}},A={style:{display:"flex","margin-top":"var(--el-main-padding)"}},B=D((()=>r("div",null,"未来10次奖品ID:",-1))),E={style:{display:"flex","margin-top":"var(--el-main-padding)"}},F=D((()=>r("div",null,"将选中的奖品修改为:",-1))),G={style:{color:"red","margin-top":"var(--el-main-padding)"}},L=D((()=>r("div",null,"* 每次开奖前五秒无法在修改奖品",-1))),M=C(e({__name:"overview",setup(e){const{width:x,height:k}=a(),C=l(),D=i((()=>C.value.clientWidth/2.16+"px")),M=l(0),O=l([]),R=l(0),Z=l(0),$=l([55,56,57,58,59,60]),H=l(0),J=l(0),K=()=>{if(0===Z.value)return b("请选择需要变更为哪个奖品ID");if(-1!==$.value.indexOf(M.value))return b("数据更新时间不能操作");const e=O.value[R.value];z(e.id,Z.value).then((e=>{Q(!0)}))},P=e=>V.filter((a=>a.id===Number(e)))[0].name,Q=(e=!1)=>{new I(N).index().then((a=>{O.value=a.data.list,!e&&R.value>0&&R.value--}))},S=()=>{new I(j).postData("index",{opening_time:H.value}).then((e=>{J.value=H.value}))};return n(x,(()=>{const e=C.value.clientWidth;C.value.style.height=e/2.16+"px"})),t((()=>{Q(),w().then((e=>{J.value=Number(e.data.opening_time),H.value=Number(e.data.opening_time),M.value=Number(e.data.seconds),setInterval((()=>{M.value++,M.value>=J.value&&(Q(),M.value=0)}),1e3)})),s((()=>{C.value.style.height=D.value}))})),(e,a)=>{const l=_("van-field"),i=_("van-button"),n=_("van-col"),t=_("van-row");return d(),u("div",U,[r("iframe",{ref_key:"iframe",ref:C,width:"100%",height:"100%",src:"/"},null,512),r("div",W,[v(l,{modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),center:"",clearable:"",label:"服务器时间"},null,8,["modelValue"])]),r("div",q,[v(l,{modelValue:H.value,"onUpdate:modelValue":a[1]||(a[1]=e=>H.value=e),center:"",clearable:"",label:"修改开奖时间",placeholder:"请输入开奖时间"},{button:o((()=>[v(i,{size:"small",type:"primary",onClick:S},{default:o((()=>[m("提交")])),_:1})])),_:1},8,["modelValue"])]),r("div",A,[B,v(t,{style:{flex:"1","margin-left":"var(--el-main-padding)"}},{default:o((()=>[(d(!0),u(p,null,c(O.value,((e,a)=>(d(),f(n,{key:a,class:y(["prize",{active:a===R.value}]),span:"2",onClick:h((e=>R.value=a),["stop"])},{default:o((()=>[m(g(P(e.index)),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})]),r("div",E,[F,v(t,{style:{flex:"1","margin-left":"var(--el-main-padding)"}},{default:o((()=>[(d(),u(p,null,c(8,(e=>v(n,{key:e,class:y(["prize",{active:e===Z.value}]),span:"2",onClick:h((a=>Z.value=e),["stop"])},{default:o((()=>[m(g(P(e)),1)])),_:2},1032,["class","onClick"]))),64)),v(n,{class:"prize",style:{"margin-left":"var(--el-main-padding)"},onClick:h(K,["stop"])},{default:o((()=>[v(i,{type:"primary",size:"small"},{default:o((()=>[m("提交")])),_:1})])),_:1},8,["onClick"])])),_:1})]),r("div",G,[r("div",null,"* 每"+g(H.value)+"秒开奖",1),L])])}}}),[["__scopeId","data-v-cbd588b3"]]);export{M as default};
